# Atlas MCP Server Configuration
#
# Defines external MCP servers that Atlas can connect to.
# Environment variables can be substituted with ${VAR_NAME} syntax.
#
# Each server gets a namespace prefix to avoid tool name collisions.
# For example, a tool "dispatch_work" from "pit_crew" becomes "pit_crew__dispatch_work"

servers:
  # Pit Crew - Development partner MCP server
  # Enables Atlas <-> Pit Crew agent-to-agent communication
  pit_crew:
    command: "bun"
    args: ["run", "${PIT_CREW_SERVER_PATH:-../../packages/mcp-pit-crew/src/index.ts}"]
    env:
      NOTION_API_KEY: "${NOTION_API_KEY}"
      PIT_CREW_DATA_DIR: "${PIT_CREW_DATA_DIR:-./data/pit-crew}"
      NOTION_PIPELINE_DB: "${NOTION_PIPELINE_DB:-ce6fbf1bee30433da9e6b338552de7c9}"
    timeout: 30000
    reconnectDelay: 5000
    maxReconnectAttempts: 3
    # Set to false to enable pit-crew server
    disabled: false

  # Notion - Official Notion MCP Server (v2.0.0+)
  # Supports: read, create, update pages/blocks/databases
  # Source: https://github.com/makenotion/notion-mcp-server
  # Docs: https://developers.notion.com/docs/mcp
  #
  # DISABLED: 2026-02-02 - Atlas uses native @notionhq/client SDK exclusively.
  # The MCP plugin has different parameter schemas that confuse Claude and
  # can cause fabricated success responses. Native SDK is tested and verified.
  # See: P0 BUG "Notion MCP Plugin Fabricates Success"
  notion:
    command: "npx"
    args: ["-y", "@notionhq/notion-mcp-server"]
    env:
      NOTION_TOKEN: "${NOTION_API_KEY}"
    timeout: 30000
    reconnectDelay: 5000
    maxReconnectAttempts: 3
    disabled: true  # PERMANENTLY DISABLED: Claude passes wrong param format (string vs object)

  # Example: Add more MCP servers here
  # memory:
  #   command: "npx"
  #   args: ["-y", "@modelcontextprotocol/server-memory"]
  #   timeout: 10000
